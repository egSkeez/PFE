<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-
transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:rich="http://richfaces.org/rich">
	<html>
<head>
<title>Statistique</title>

<meta http-equiv="Content-Type" content="text/html;" />
<script src="../framGraphique/#{languageManager.calendar}"
	type="text/javascript"></script>
<script type="text/javascript">
    var $rfjquery  = jQuery.noConflict(); 
</script>

<script src="../framGraphique/js/HighCharts/jquery-1.8.0.min.js"
	type="text/javascript"></script>

<script type="text/javascript">
    var newjq =  jQuery.noConflict();
</script>
<script src="../framGraphique/js/HighCharts/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<script type="text/javascript">
function submitResult() {
	#{rich:element("result")}.submit();
}

function checkDate() {
    var selectedDate = #{rich:component("selectedDate")}.selectedDate;
    var selectedDateF = #{rich:component("selectedDateF")}.selectedDate;

    var days = Math.floor((Math.abs(selectedDate - selectedDateF) / 1000) / 86400);
	console.log(days);
    if (days &lt;= 31) {
    	#{rich:element("viewStatisticsBtn")}.show();
    	#{rich:element("showMsgPanalPeriodBtn")}.hide()
    } else {
    	#{rich:element("viewStatisticsBtn")}.hide()
    	#{rich:element("showMsgPanalPeriodBtn")}.show();
    }
}
</script>
<script type="text/javascript">
var var2 = #{statistiqueBean.titre};
var var1 = html_entity_decode(var2);
var var3 = #{statistiqueBean.typeCourrier1};
var var4 = html_entity_decode(var3);
var var5 = #{statistiqueBean.typeCourrier2};
var var6 = html_entity_decode(var5);
var var7 = #{statistiqueBean.typeCourrier3};
var var8 = html_entity_decode(var7);
function html_entity_decode(str){
	  try{
	  var ta=document.createElement("textarea");
	  ta.innerHTML=str;
	  var resTab = ta.value.split(',');
	  return resTab;
	  }catch(e){};
	}
</script>
<script type="text/javascript">
newjq(function () {
	newjq('#container').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: var1
        },
        subtitle: {
            text: ' '
        },
        xAxis: {
            categories: #{statistiqueBean.axeX}
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Nombre des courriers'
            }
        },
        tooltip: {
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
        series: [{
            name: var4,
            data: #{statistiqueBean.dataTypeCourrier1}

        }, {
            name: var6,
            data: #{statistiqueBean.dataTypeCourrier2}

        }, {
            name: var8,
            data: #{statistiqueBean.dataTypeCourrier3}

        }]
    });
});
</script>
<script type="text/javascript">
function html_entity_decode(str){
	  try{
	  var ta=document.createElement("textarea");
	  ta.innerHTML=str;
	  var resTab = ta.value.split(',');
	  return resTab;
	  }catch(e){};
	
	}
var var2 = #{statistiqueBean.titre};
var var1 = html_entity_decode(var2);
var var5 = #{statistiqueBean.axeX};
var var6 = html_entity_decode(var5);

newjq(function () {
	 Highcharts.setOptions({
	     colors: ['#677E52', '#375D81', '#93A299', '#8C5935', '#05966D', '#419F2E', '#FF321D', '#E2AD3B', '#FF73BF', '#4EA9A0', '#C44C51', '#BD33A4', '#00FE7E', '#64E572', '#895959', '#FFF263', '#6AF9C4', '#D400FF', '#FF0000', '#006699','#677E52','#570906','#FFF168','#8FCF3C','#FC7F3C','#1D702D','#BDA44D','#FF483D','#D400FF','#B9121B','#6600FF','#C9A0DC','#F7230C','#F88E55','#EF9B0F','#FEC3AC','#BB0B0B','#677E52', '#375D81', '#93A299', '#8C5935', '#05966D', '#419F2E', '#FF321D', '#E2AD3B']
	    }); 
        var colors = Highcharts.getOptions().colors,
            categories = var6,
            data = #{statistiqueBean.dataNatureCourrier};
                                                        
    
        // Build the data arrays
        var browserData = [];
        var versionsData = [];
        for (var i = 0; i &lt; data.length; i++) {
    
            // add Stat data (nature, mode de reception ..)
            browserData.push({
                name: categories[i],
                y: data[i].y,
                showInLegend: true,
                color: data[i].color
            });
    
            // add  data (arrive/depart)
            for (var j = 0; j &lt; data[i].drilldown.data.length; j++) {
                var brightness = 0.2 - (j / data[i].drilldown.data.length) / 5 ;
                versionsData.push({
                    name: data[i].drilldown.categories[j],
                    y: data[i].drilldown.data[j],
                    showInLegend: false,
                    color: Highcharts.Color(data[i].color).brighten(brightness).get()
                });
            }
        }
    
        // Create the chart
        newjq('#container2').highcharts({
            chart: {
                type: 'pie'
            },
            title: {
                text: var1
            },
            yAxis: {
                title: {
                    text: ' '
                }
            },
            plotOptions: {
                pie: {
                	allowPointSelect: true,
                    cursor: 'pointer',
                    showInLegend: true,
                    shadow: false,
                    center: ['50%', '50%']
                }
            },
            tooltip: {
        	    valueSuffix: '%'
            },
            legend: {
                enabled: true,
                layout: 'vertical',
                align: 'right',
                maxHeight:300,
                verticalAlign: 'middle',
                labelFormatter: function() {
                    return this.name + ' : ' + this.y + '%';
                }
            },
            series: [{
                name: 'Pourcentage',
                data: browserData,
                showInLegend: true,
                size: '60%',
                dataLabels: {
                    formatter: function() {
                        return this.y > 5 ? this.point.name : null;
                    },
                    color: 'white',
                    distance: -30
                }
            }, {
                name: 'Pourcentage',
                data: versionsData,
                showInLegend: false,
                size: '80%',
                innerSize: '60%',
                dataLabels: {
                    formatter: function() {
                        // display only if larger than 1
                        return this.y > 1 ? '<b>'+ this.point.name +':</b> '+ this.y +'%'  : null;
                    }
                }
            }]
        });
    });
</script>
<script type="text/javascript">
var var1 = #{statistiqueBean.titre};
var var2 = html_entity_decode(var1);
function html_entity_decode(str){
	  try{
	  var ta=document.createElement("textarea");
	  ta.innerHTML=str;
	  var resTab = ta.value.split(',');
	  return resTab;
	  }catch(e){};
	}

newjq(function () {
	newjq('#container3').highcharts({
         chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: var2
        },
        subtitle: {
            text: ' '
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Nombre des courriers'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Nombre des jours'
            }
        },
        legend: {
            enabled: false
        },
		plotOptions: {
            scatter: {
                marker: {
                    radius: 5,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                },
                tooltip: {
                     headerFormat: '<b>{series.name}</b><br/>',
					 pointFormat: '{point.x} courriers : {point.y} jour(s).'
                }
            }
        },
        series: [{
            name: 'Delai de reponse',
			color: 'rgba(119, 152, 191, .5)',
            data: #{statistiqueBean.dataDelaiReponseCourrier}
        }]
    });
});
</script>
<script type="text/javascript">
var var1 = #{statistiqueBean.titre};
var var2 = html_entity_decode(var1);
var varPasEncoreRep = html_entity_decode('Pas encore répondu');
var varRepHorsDelai = html_entity_decode('Répondu hors délai');
var varRepDansDelai = html_entity_decode('Répondu dans les délai');
function html_entity_decode(str){
	  try{
	  var ta=document.createElement("textarea");
	  ta.innerHTML=str;
	  var resTab = ta.value.split(',');
	  return resTab;
	  }catch(e){};
	}

newjq(function () {
	newjq('#container4').highcharts({
            chart: {
                type: 'column'
            },
            title: {
                text: var2
            },
            xAxis: {
                categories: #{statistiqueBean.categorieType}
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Nombre des courriers'
                },
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color:  'gray'
                    }
                }
            },
            legend: {
                align: 'right',
                x: -70,
                verticalAlign: 'top',
                y: 20,
                floating: true,
                backgroundColor: 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color:  'white',
                        style: {
                            textShadow: '0 0 3px black, 0 0 3px black'
                        }
                    }
                }
            },
            series: [{
                name: varPasEncoreRep,
                data: #{statistiqueBean.dataPasRepondu}
            }, {
                name: varRepHorsDelai,
                data: #{statistiqueBean.dataReponduHorsDelai}
            }, {
                name: varRepDansDelai,
                data: #{statistiqueBean.dataReponduDansDelai}
            }]
        });
    });
</script>
</head>
<body>

	<f:view locale="#{languageManager.locale}">
		<link rel="STYLESHEET" type="text/css"
			href="../framGraphique/#{languageManager.css}" title="css"></link>
		<div id="page">
			<div id="header">
				<ui:include src="../framGraphique/header.xhtml"></ui:include>
			</div>
			<div id="menuPrincipale">
				<ui:include src="../framGraphique/toolbar.xhtml"></ui:include>
			</div>
			<div id="contenu">
				<div id="corpsGauche">

					<rich:panel styleClass="rich-panel">
						<h:form>
							<div id="barreIcone">
								<div id="barreIconeGauche">
									<a4j:commandLink id="accueil"
										onclick="document.location.href='acceuilGBO.jsf'">
										<h:graphicImage
											value="../framGraphique/images/accueilActif.png"
											onmouseover="this.src='../framGraphique/images/accueilmodifier.png'"
											onmouseout="this.src='../framGraphique/images/accueilActif.png'" />
									</a4j:commandLink>
									<rich:spacer width="7" />
									<a4j:commandLink id="accueilRelance"
										onclick="document.location.href='courrierRelance.jsf'">
										<h:graphicImage
											value="../framGraphique/images/relanceAccueilInactif.png"
											onmouseover="this.src='../framGraphique/images/relanceAccuelActif.png'"
											onmouseout="this.src='../framGraphique/images/relanceAccueilInactif.png'" />
									</a4j:commandLink>

								</div>
								<div id="barreIconeDroite"></div>
							</div>
						</h:form>
					</rich:panel>

					<h:form id="result">
						<rich:panel styleClass="rich-panel">
							<f:facet name="header">
								<h:panelGrid columns="1" styleClass="xtePanelGrid">
									<h:outputText value="#{msg.statistiqueCourrier}"
										styleClass="xteEnregistrementLabelOutput" />
								</h:panelGrid>
							</f:facet>
							<a4j:keepAlive beanName="statistiqueBean" />


							<div align="center">
								<table width="100%" border="0">
									<tr>
										<td width="50%" valign="top"><h:panelGrid columns="6">
												<h:outputText value="#{msg.datePeriode} : "
													styleClass="xteDetailLabel" />
												<h:selectOneMenu id="selectOneMenuId"
													styleClass="xteDetailLabelOutput" style="width:100px;"
													value="#{statistiqueBean.typeDate}" layout="pageDirection">
													<a4j:support event="onchange" reRender="result"
														ajaxSingle="true"
														actionListener="#{statistiqueBean.chooseTypeDate}" />
													<f:selectItem itemLabel="Jour" itemValue="jour" />
													<f:selectItem itemLabel="Mois" itemValue="mois" />
													<f:selectItem itemLabel="Année" itemValue="annee" />
													<f:selectItem itemLabel="Période" itemValue="periode" />
												</h:selectOneMenu>
												<rich:calendar datePattern="dd/MM/yyyy" id="selectedDate"
													value="#{statistiqueBean.selectedDate}"
													rendered="#{statistiqueBean.showInputDay}"
													locale="#{calendarBean.locale}"
													monthLabels="#{calendarBean.listMois}"
													ondateselected="checkDate();" oninputchange="checkDate();" />
												<rich:calendar datePattern="dd/MM/yyyy" id="selectedDateF"
													value="#{statistiqueBean.selectedDateF}"
													rendered="#{statistiqueBean.showInputPeriode}"
													locale="#{calendarBean.locale}"
													monthLabels="#{calendarBean.listMois}"
													ondateselected="checkDate();" oninputchange="checkDate();" />
												<h:selectOneMenu id="selectOneMenuMonthId"
													rendered="#{statistiqueBean.showInputMonth}"
													styleClass="xteDetailLabelOutput" style="width:100px;"
													value="#{statistiqueBean.choixMois}" layout="pageDirection">
													<a4j:support event="onchange"
														actionListener="#{statistiqueBean.chooseMonth}" />
													<f:selectItem itemLabel="Janvier" itemValue="janvier" />
													<f:selectItem itemLabel="Février" itemValue="fevrier" />
													<f:selectItem itemLabel="Mars" itemValue="mars" />
													<f:selectItem itemLabel="Avril" itemValue="avril" />
													<f:selectItem itemLabel="Mai" itemValue="mai" />
													<f:selectItem itemLabel="Juin" itemValue="juin" />
													<f:selectItem itemLabel="Juillet" itemValue="juillet" />
													<f:selectItem itemLabel="Aout" itemValue="aout" />
													<f:selectItem itemLabel="Septembre" itemValue="septembre" />
													<f:selectItem itemLabel="Octobre" itemValue="octobre" />
													<f:selectItem itemLabel="Novembre" itemValue="novembre" />
													<f:selectItem itemLabel="Décembre" itemValue="decembre" />
												</h:selectOneMenu>
												<h:selectOneMenu id="selectOneMenuYearId"
													rendered="#{statistiqueBean.showInputYear}"
													styleClass="xteDetailLabelOutput" style="width:100px;"
													value="#{statistiqueBean.choixAnnee}"
													layout="pageDirection">
													<a4j:support event="onchange"
														actionListener="#{statistiqueBean.chooseYear}" />
													<f:selectItems value="#{statistiqueBean.selectItemsYear}" />
												</h:selectOneMenu>
											</h:panelGrid>
											
											 <a4j:outputPanel id="panneauNature">
												<h:panelGrid columns="9"
													rendered="#{statistiqueBean.affichePanneauNature}">
													
														<h:outputText value="#{msg.CourrierCategorie} :" 
																	styleClass="xteDetailLabel" style=" width :100px;" />
						
														<h:selectOneMenu id="rdBtnCat" 
																value="#{statistiqueBean.selectedItemCategorie}"
																required="true"
																requiredMessage="* #{msg.CourrierCategorie} #{msg.champsobligatoire}"
																style=" width : 133px;">
																<f:selectItems
																	value="#{statistiqueBean.selectItemsCatg}" />
																<a4j:support event="onchange" ajaxSingle="true"
																	reRender="rdBtnNature"
																	actionListener="#{statistiqueBean.chargerNature}" />
															</h:selectOneMenu>
															
														<rich:spacer width="15px"/>
														
													<h:outputText value="#{msg.CourrierNature}" id="natureLabel"
														styleClass="xteDetailLabel" style=" width :100px;" />
														
													<h:selectOneMenu id="rdBtnNature"
														value="#{statistiqueBean.selectedItemNature}"
														style=" width : 140px;">
														<f:selectItems value="#{statistiqueBean.selectItemsNat}" />
														<a4j:support id="nature" event="onchange"
															ajaxSingle="true"
															reRender="monPanneauCheque1,monPanneauCheque2" />
													</h:selectOneMenu>
													
													<rich:spacer width="50px" />
													<h:outputText rendered="#{statistiqueBean.affichePanneauStructure}" id="structureLabel"
														value="#{msg.statistiqueStructureLibelle} #{msg.deuxpointsLabel}"
														styleClass="xteDetailLabel" style=" width :100px;" />

													<h:selectOneRadio id="checkStructure" required="true" rendered="#{statistiqueBean.affichePanneauStructure}"
														value="#{statistiqueBean.valueAttr}"
														styleClass="xteDetailLabelOutput">

														<f:selectItem
															itemLabel="#{msg.courrierRecherMultiTousLabel}"
															itemValue="Tous" />
														<f:selectItem itemLabel="#{msg.courrierStatTopVingtLabel}"
															itemValue="Top20" />
														<f:selectItem itemLabel="#{msg.courrierStatSupVingtLabel}"
															itemValue=">=20%" />

													</h:selectOneRadio>

												</h:panelGrid>
											</a4j:outputPanel>
											
											</td>
									</tr>

									<tr>
										<td width="50%" valign="top"><h:panelGrid columns="2">
												<h:outputText value="#{msg.etatStatistique} :"
													styleClass="xteDetailLabel" />
												<h:column />
												<h:selectOneRadio id="selectOneRadioId"
													styleClass="xteDetailLabelOutput" style="margin-left:10px;"
													value="#{statistiqueBean.etatStatistique}"
													layout="pageDirection">
													<f:selectItem itemLabel="#{msg.nombreCourriersTotal}"
														itemValue="nombreCourrierTotal" />
													<f:selectItem itemLabel="#{msg.nombreCourriersNature}"
														itemValue="nombreCourrierNature" />
													<f:selectItem
														itemLabel="#{msg.nombreCourrierModeReception}"
														itemValue="nombreCourrierModeReception" />
													<f:selectItem itemLabel="#{msg.delaisReponseCourrier}"
														itemValue="delaiReponseCourrier" />
													<f:selectItem rendered="#{accueilGBOBean.boc}==true"
														itemLabel="#{msg.tempsMoyenReponseDepartement}"
														itemValue="tempsMoyenReponseDepartement" />
													<f:selectItem itemLabel="#{msg.statistiqueDegreeUrgence}"
														itemValue="degreeUrgence" />
													<f:selectItem itemLabel="#{msg.statistiqueAnnotation}"
														itemValue="annotation" />
													<f:selectItem itemLabel="#{msg.statistiqueOrganisme}"
														itemValue="organisme" />
													<f:selectItem itemLabel="#{msg.statistiqueStructure}"
														itemValue="structure" />
													<f:selectItem
														itemLabel="#{msg.nombreCourriersParUtilisateur}"
														itemValue="nbreCourrierParUtilisateur" />
													<f:selectItem
														itemLabel="#{msg.nombreCourriersParStructureParNature}"
														itemValue="nbreCourrierParStructureParNature"></f:selectItem>
													<a4j:support event="onchange" reRender="panneauNature,checkStructure,structureLabel"
														actionListener="#{statistiqueBean.evenementChoixNature}"
														ajaxSingle="true" />
													<f:selectItem
														itemLabel="#{msg.tempsMoyenReponseDepartementNature}"
														itemValue="tempsMoyenReponseDepartementNature" />
													<a4j:support event="onchange" reRender="panneauNature,checkStructure,structureLabel"
														actionListener="#{statistiqueBean.evenementChoixNature}"
														ajaxSingle="true" />

												</h:selectOneRadio>


											</h:panelGrid>
										</td>

									</tr>

								</table>
								<rich:spacer height="10" />
								<div>
									<a4j:commandButton value="#{msg.apercu}"
										oncomplete="if(#{statistiqueBean.tooLong}==true) #{rich:component('msgPanalPeriod')}.show();
													if(#{statistiqueBean.tooLong}==false) document.location.href='statistique.jsf'"
										ajaxsingle="true" status="ajaxStatus"
										action="#{statistiqueBean.periodCalcBeforeViewStatistics}"
										reRender="msgPanalPeriod, resultPanel">
									</a4j:commandButton>
									<rich:spacer height="10px" />
									<a4j:commandButton value="#{msg.reinitialiser}"
										action="#{statistiqueBean.reinitialize}"
										reRender="selectOneRadioId,result" type="submit">
									</a4j:commandButton>
								</div>
							</div>
							<rich:spacer height="10" />
							<a4j:status id="ajaxStatus" forceId="true"
								onstart="#{rich:component('waitPanel')}.show('',{height:'85px', width:'250px'})"
								onstop="#{rich:component('waitPanel')}.hide()" />
							<rich:modalPanel id="waitPanel" style="text-align:center"
								autosized="true">
								<h:outputText value="#{msg.messageRecherche}"
									style="font-weight:bold;font-size:large" />
								<div align="center">
									<h:graphicImage value="../framGraphique/images/timeOut.gif"
										alt="timeOut" />
								</div>
							</rich:modalPanel>
						</rich:panel>
						<rich:panel styleClass="rich-panel">
							<f:facet name="header">
								<h:outputText value="#{msg.result}"
									styleClass="xteEnregistrementLabelOutput" />
							</f:facet>
							<div id="container"></div>
							<div id="container2"></div>
							<div id="container3"></div>
							<div id="container4"></div>
							<div id="barreIconeDroite">
								<h:commandLink id="pdfOrganisme" target="_blank"
									action="#{rapportStatistique.printPDFOrganisme}"
									style="display:#{statistiqueBean.showStatistiqueArriveByOrganisme}">
									<h:graphicImage value="../framGraphique/images/PDF.png"
										onmouseover="this.src='../framGraphique/images/PDF.png'"
										onmouseout="this.src='../framGraphique/images/PDF.png'"
										alt="pdf" />
								</h:commandLink>
								<h:commandLink id="pdfStructure" target="_blank"
									action="#{rapportStatistique.printPdfStructure}"
									style="display:#{statistiqueBean.showStatistiqueArriveByStructure}">
									<h:graphicImage value="../framGraphique/images/PDF.png"
										onmouseover="this.src='../framGraphique/images/PDF.png'"
										onmouseout="this.src='../framGraphique/images/PDF.png'"
										alt="pdf" />
								</h:commandLink>
							</div>
							<style>
.grid_panel_top>tbody>tr>td {
	vertical-align: top;
}

.text_align_right {
	text-align: right;
}
</style>
							<h:panelGrid
								style="display:#{statistiqueBean.showStatistiqueArriveByOrganisme}"
								columns="3" styleClass="grid_panel_top">
								<h:column style="vertical-align:top;">
									<rich:dataTable
										value="#{statistiqueBean.listStatistiqueArriveByOrganisme}"
										var="organisme" id="organismeArriveDataTable"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="#{msg.statistiqueOrganismeExpediteur}" />
										</f:facet>

										<rich:column
											sortBy="#{organisme.organismeExterne.expDestExterneNom}"
											filterBy="#{organisme.organismeExterne.expDestExterneNom}"
											filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueOrganismeLibelle}" />
											</f:facet>
											<h:outputText value="#{organisme.organismeName}"></h:outputText>
										</rich:column>

										<rich:column sortBy="#{organisme.pourcentage}"
											filterBy="#{organisme.pourcentage}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiquePourcentage}" />
											</f:facet>
											<h:outputText value="#{organisme.pourcentage}" />
										</rich:column>

									</rich:dataTable>
								</h:column>
								<rich:spacer width="30%" />
								<h:column style="vertical-align:top;">
									<rich:dataTable
										value="#{statistiqueBean.listStatistiqueDepartByOrganisme}"
										var="organisme" id="organismeDepartDataTable"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="#{msg.statistiqueOrganismeDestinataire}" />
										</f:facet>
										<rich:column
											sortBy="#{organisme.organismeExterne.expDestExterneNom}"
											filterBy="#{organisme.organismeExterne.expDestExterneNom}"
											filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueOrganismeLibelle}" />
											</f:facet>
											<h:outputText value="#{organisme.organismeName}" />
										</rich:column>

										<rich:column sortBy="#{organisme.pourcentage}"
											filterBy="#{organisme.pourcentage}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiquePourcentage}" />
											</f:facet>
											<h:outputText value="#{organisme.pourcentage}" />
										</rich:column>

									</rich:dataTable>
								</h:column>
							</h:panelGrid>
							<h:panelGrid
								style="display:#{statistiqueBean.showStatistiqueArriveByStructure}"
								columns="3" styleClass="grid_panel_top">
								<h:column style="vertical-align:top;">
									<rich:dataTable rows="10"
										value="#{statistiqueBean.listStatistiqueDepartByStructure}"
										var="structure" id="structureDepartDataTable"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="#{msg.statistiqueStructureExpediteur}" />
										</f:facet>
										<rich:column sortBy="#{structure.unite.nameUnit}"
											filterBy="#{structure.unite.nameUnit}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueStructureLibelle}" />
											</f:facet>
											<h:outputText value="#{structure.unite.nameUnit}" />
										</rich:column>

										<rich:column sortBy="#{structure.pourcentage}"
											filterBy="#{structure.pourcentage}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiquePourcentage}" />
											</f:facet>
											<h:outputText value="#{structure.pourcentage}" />
										</rich:column>
										<f:facet name="footer">
											<rich:datascroller for="structureDepartDataTable"
												id="dscStructureDepartDataTable" />
										</f:facet>
									</rich:dataTable>
								</h:column>

								<rich:spacer width="30%" />
								<h:column style="vertical-align:top;">
									<rich:dataTable rows="10"
										value="#{statistiqueBean.listStatistiqueArriveByStructure}"
										var="structure" id="structureArriveDataTable"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="#{msg.statistiqueStructureDestinataire}" />
										</f:facet>
										<rich:column sortBy="#{structure.unite.nameUnit}"
											filterBy="#{structure.unite.nameUnit}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueStructureLibelle}" />
											</f:facet>
											<h:outputText value="#{structure.unite.nameUnit}" />
										</rich:column>

										<rich:column sortBy="#{structure.pourcentage}"
											filterBy="#{structure.pourcentage}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiquePourcentage}" />
											</f:facet>
											<h:outputText value="#{structure.pourcentage}" />
										</rich:column>
										<f:facet name="footer">
											<rich:datascroller for="structureArriveDataTable"
												id="dscStructureArriveDataTable" />
										</f:facet>
									</rich:dataTable>
								</h:column>
							</h:panelGrid>

							<!-- Statistique 	:	 Nbre des courriers par utilisateur -->

							<h:panelGrid
								style="display:#{statistiqueBean.showStatistiqueCourrrierArriveByUtilisateur}"
								columns="3" styleClass="grid_panel_top">
								<h:column style="vertical-align:top;">
									<rich:dataTable rows="10"
										value="#{statistiqueBean.listStatistiqueCourrierArriveeByUtilisateur}"
										var="courrier" id="courrierUtilisateurDepartDataTable"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="Nombre des Courriers Arrivées " />
										</f:facet>
										<rich:column sortBy="#{courrier.agent.nom}"
											filterBy="#{courrier.agent.nom}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueUtilisareurLibelle}" />
											</f:facet>
											<h:outputText
												value="#{courrier.agent.nom} #{courrier.agent.prenom}" />
										</rich:column>

										<rich:column sortBy="#{courrier.nbrCourrier}"
											filterBy="#{courrier.nbrCourrier}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText
													value="#{msg.statistiqueNbreCourrierParUtilisateur}" />
											</f:facet>
											<h:outputText value="#{courrier.nbrCourrier}" />
										</rich:column>
										<f:facet name="footer">
											<rich:datascroller for="courrierUtilisateurDepartDataTable"
												id="dscCourrierUtilisateurDepartDataTable" />
										</f:facet>
									</rich:dataTable>
								</h:column>

								<rich:spacer width="30%" />
								<h:column style="vertical-align:top;">
									<rich:dataTable rows="10"
										value="#{statistiqueBean.listStatistiqueCourrierDepartByUtilisateur}"
										var="courrier" id="structureArriveDataTable2"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="Nombre des Courriers Départs " />
										</f:facet>
										<rich:column sortBy="#{courrier.agent.nom} "
											filterBy="#{courrier.agent.nom} " filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueUtilisareurLibelle}" />
											</f:facet>
											<h:outputText
												value="#{courrier.agent.nom} #{courrier.agent.prenom}" />
										</rich:column>

										<rich:column sortBy="#{courrier.nbrCourrier}"
											filterBy="#{courrier.nbrCourrier}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText
													value="#{msg.statistiqueNbreCourrierParUtilisateur}" />
											</f:facet>
											<h:outputText value="#{courrier.nbrCourrier}" />
										</rich:column>
										<f:facet name="footer">
											<rich:datascroller for="structureArriveDataTable2"
												id="dscStructureArriveDataTable2" />
										</f:facet>
									</rich:dataTable>
								</h:column>
							</h:panelGrid>
							<rich:spacer />
							<h:panelGrid columns="1"
								style="display:#{statistiqueBean.showStatistiqueCourrrierByStructureByNature}"
								styleClass="grid_panel_top">
								<h:outputText
									value="#{msg.CourrierNature} #{statistiqueBean.libelleNature}"
									styleClass="xteDetailLabel" />


								<h:column style="vertical-align:top;">
									<rich:dataTable rows="10"
										value="#{statistiqueBean.listStatCourrierStructureByNatureDM}"
										var="structure" id="structureNatureDepartDataTable1"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<h:outputText value="Selon Structure et Nature" />
										</f:facet>
										<rich:column sortBy="#{structure.unite.nameUnit}"
											filterBy="#{structure.unite.nameUnit}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiqueStructureLibelle}" />
											</f:facet>
											<h:outputText value="#{structure.unite.nameUnit}" />
										</rich:column>



										<rich:column sortBy="#{structure.countCourrier}"
											filterBy="#{structure.countCourrier}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText
													value="#{msg.statistiqueNbreCourriersPourcentage}" />
											</f:facet>
											<h:outputText value="#{structure.countCourrier}" />

										</rich:column>

										<rich:column sortBy="#{structure.pourcentage}"
											filterBy="#{structure.pourcentage}" filterEvent="onkeyup">
											<f:facet name="header">
												<h:outputText value="#{msg.statistiquePourcentage}" />
											</f:facet>
											<h:outputText
												value="#{structure.pourcentage} #{msg.pourcentageLabel}" />
										</rich:column>
										<f:facet name="footer">
											<rich:datascroller for="structureNatureDepartDataTable1"
												id="dscStructureDepartDataTable" />
										</f:facet>
									</rich:dataTable>
								</h:column>
								<h:column>
									<rich:dataTable />

								</h:column>

							</h:panelGrid>

							<h:panelGrid columns="1"
								style="display:#{statistiqueBean.showStatistiqueCourrrierDelaisReponseParUniteParNature}">
								<h:outputText
									value="#{msg.CourrierNature} #{statistiqueBean.libelleNature}"
									styleClass="xteDetailLabel" />
								<h:column style="vertical-align:top;">
									<rich:dataTable rows="10"
										value="#{statistiqueBean.listStatistiqueCourrierTempsReponseParUniteNatureDM}"
										var="structure" id="delaideReponseCourrier"
										styleClass="rich-datatable"
										onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
										onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
										columnClasses="none, text_align_right">
										<f:facet name="header">
											<rich:columnGroup>
												<rich:column >
													<h:outputText value="Structure" />
												</rich:column>
												<rich:column colspan="2">
													<h:outputText value="Courriers Hors Délai" />
												</rich:column>

												<rich:column colspan="2">
													<h:outputText value="Courriers dans Délai" />
												</rich:column>
												
												<rich:column colspan="2">												
												<h:outputText value="Courrier non encore traités"/>
												</rich:column>
											</rich:columnGroup>
										</f:facet>

										<rich:column>
											<h:outputText value="#{structure.unite.nameUnit}" />
										</rich:column>

										<rich:column>
											<f:facet name="header">
												<h:outputText value="En Nombre " />
											</f:facet>
											<h:outputText value="#{structure.nbreCourrierTraiteHorsDelai}"/>
										</rich:column>

										<rich:column>
											<f:facet name="header">
												<h:outputText value="En Pourcentage" />
											</f:facet>
										<h:outputText value="#{structure.pourcentageCourrierTraiteHorsDelai} %" />

										</rich:column>

										<rich:column>
											<f:facet name="header">
												<h:outputText value="En Nombre" />
											</f:facet>
								       
								       <h:outputText value="#{structure.nbreCourrieTraiteDansDelai}"/>
											
										</rich:column>

										<rich:column>
											<f:facet name="header">
												<h:outputText value="En Pourcentage" />
											</f:facet>
											<h:outputText value="#{structure.pourcentageCourrieTraiteDansDelai}%" />
										</rich:column>

										
										<rich:column>
											<f:facet name="header">
												<h:outputText value="En Nombre" />
											</f:facet>
									 <h:outputText value="#{structure.nbreCourrierPasencoreTraite}"/>
										</rich:column>

										<rich:column>
											<f:facet name="header">
												<h:outputText value="En Pourcentage" />
											</f:facet>
										<h:outputText value="#{structure.pourcentageCourrierPasencoreTraite}%" />

										</rich:column>

										<f:facet name="footer">
											<rich:datascroller for="delaideReponseCourrier"
												id="dscStructureDepartDataTable" />
										</f:facet>


									</rich:dataTable>
								</h:column>
							</h:panelGrid>
						</rich:panel>

					</h:form>

					<rich:modalPanel id="msgPanalPeriod" autosized="true" height="100"
						width="400">
						<f:facet name="header">
							<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
								<rich:spacer width="2" />
								<h:outputText value="#{msg.labelInfo}"
									styleClass="xtePopupInformationTextHeader" />
							</h:panelGrid>
						</f:facet>
						<f:facet name="controls">
							<h:panelGroup>
								<h:graphicImage value="../framGraphique/images/close.png"
									width="15" height="15" id="hidelink3" />
								<rich:componentControl for="msgPanalPeriod" attachTo="hidelink3"
									operation="hide" event="onclick" />
							</h:panelGroup>
						</f:facet>
						<table align="center">
							<tr>
								<td align="left"><h:graphicImage
										value="../framGraphique/images/interrogation.png"
										alt="confirm" /></td>
								<td align="center" colspan="2"><h:outputText
										styleClass="popupInformationText"
										value="#{msg.statistiqueTooLong}" /></td>
							</tr>
						</table>
						<h:form>
							<table align="center">
								<tr>
									<td align="center"><a4j:commandButton
											value="#{msg.bouttonOui}"
											action="#{statistiqueBean.viewStatistics}"
											oncomplete="Richfaces.hideModalPanel('msgPanalPeriod'); document.location.href='statistique.jsf'">
										</a4j:commandButton>
									</td>
									<td><a4j:commandButton value="#{msg.bouttonNon}"
											styleClass="submitButton"
											onclick="Richfaces.hideModalPanel('msgPanalPeriod');" />
									</td>
								</tr>
							</table>
						</h:form>
					</rich:modalPanel>
					<rich:modalPanel id="msgPanal" autosized="true" height="100"
						width="400">
						<f:facet name="header">
							<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
								<rich:spacer width="2" />

								<h:outputText value="#{msg.labelInfo}"
									styleClass="xtePopupInformationTextHeader" />
							</h:panelGrid>
						</f:facet>
						<f:facet name="controls">
							<h:panelGroup>
								<h:graphicImage value="../framGraphique/images/close.png"
									width="15" height="15" id="hidelink1" />
								<rich:componentControl for="msgPanal" attachTo="hidelink1"
									operation="hide" event="onclick" />
							</h:panelGroup>
						</f:facet>
						<h:form>
							<table align="center">
								<tr>
									<td align="left"><h:graphicImage
											value="../framGraphique/images/interrogation.png"
											alt="confirm" /></td>
									<td align="center" colspan="2"><h:outputText
											styleClass="popupInformationText"
											value="#{msg.CourrierAjoutMsg}" /></td>
								</tr>
							</table>
							<table align="center">
								<tr>
									<td align="center"><a4j:commandButton
											value="#{msg.bouttonOk}" type="submit" ajaxSingle="true"
											styleClass="submitButton"
											onclick="Richfaces.hideModalPanel('msgPanal');" /></td>
									<td><a4j:commandButton value="#{msg.bouttonNon}"
											styleClass="submitButton" /></td>
								</tr>
							</table>
						</h:form>
					</rich:modalPanel>
					<!-- *********popup alert********* -->
					<rich:modalPanel id="msgPanal2"
						showWhenRendered="#{statistiqueBean.showAlertMessage}"
						autosized="true" height="90" width="300">

						<f:facet name="header">
							<h:panelGrid columns="3" cellpadding="0" cellspacing="0">
								<rich:spacer width="2" />
								<h:outputText value="#{msg.labelInfo}"
									styleClass="xtePopupInformationTextHeader" />
							</h:panelGrid>
						</f:facet>

						<f:facet name="controls">
							<h:panelGroup>
								<h:graphicImage value="../framGraphique/images/close.png"
									width="15" height="15" id="hidelink2" />
								<rich:componentControl for="msgPanal2" attachTo="hidelink2"
									operation="hide" event="onclick" />
							</h:panelGroup>
						</f:facet>
						<h:form>
							<table align="center">
								<tr>
									<td align="left"><h:graphicImage
											value="../framGraphique/images/avertissement.png" /></td>
									<td align="center" colspan="2"><h:outputText
											styleClass="xtePopupInformationText"
											value="#{statistiqueBean.message}" /></td>
								</tr>
							</table>
							<table align="center">
								<tr>
									<td align="center"><a4j:commandButton
											value="#{msg.buttonOk}"
											oncomplete="Richfaces.hideModalPanel('msgPanal2');"
											type="submit" ajaxSingle="true" styleClass="submitButton" />
									</td>
								</tr>
							</table>
						</h:form>
					</rich:modalPanel>
				</div>
				<div id="inter" />
				<div id="corpsDroite">

					<div class="monthenc">
						<script type="text/javascript">
							//         
							document.write(monthi8[w4s.getMonth()]); //
						</script>
					</div>
					<div class="datebx">
						<script type="text/javascript">
							//         
							document.write(s6ix[s3x]); //
						</script>
						<div class="dateenc">
							<a href="http://www.websiteadministrator.com.au/"><script
									type="text/javascript">
								//         
								document.write(w4s.getDate()); //
							</script> </a>
						</div>
					</div>
					<div class="dayenc">
						<a href="http://www.websiteadministrator.com.au/"><script
								type="text/javascript">
							//         
							document.write(s0x[w4s.getDay()]); //
						</script> </a>
					</div>
					<div class="yearenc">
						<script type="text/javascript">
							//         
							document.write(w4s.getFullYear()); //
						</script>
					</div>
				</div>
			</div>
			<div id="footer">
				<ui:include src="../framGraphique/footer.xhtml"></ui:include>
			</div>

		</div>
	</f:view>
</body>
	</html>
</ui:composition>